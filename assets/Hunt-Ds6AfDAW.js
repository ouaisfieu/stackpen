import{c as B,r as C,s as A,b as W,j as e,m as y,u as Fe,e as qe,v as ge,i as ie,o as ne,f as Y,P as O,w as G,D as be,A as q,S as Ne,p as V,M as re,X as $,T as ce,a as ve,C as ae,x as $e,G as Be,E as Re,F as fe,y as ye,z as we,k as oe,t as He,B as ze,H as Oe,J as Ue}from"./index-KgKUpajO.js";import{B as U,A as le,U as Ge,P as de}from"./user-Cz25Hd7R.js";import{C as Ce,a as _e,M as Ve}from"./message-square-Px8wYpTW.js";import{H as me,G as Xe,M as Ye}from"./menu-DDNKB27x.js";const Ke=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Je=B("bell",Ke);const Qe=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],z=B("briefcase",Qe);const We=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],Ze=B("chart-pie",We);const es=[["path",{d:"M4 10h12",key:"1y6xl8"}],["path",{d:"M4 14h9",key:"1loblj"}],["path",{d:"M19 6a7.7 7.7 0 0 0-5.2-2A7.9 7.9 0 0 0 6 12c0 4.4 3.5 8 7.8 8 2 0 3.8-.8 5.2-2",key:"1j6lzo"}]],K=B("euro",es);const ss=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],ts=B("layout-dashboard",ss);const as=[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]],ls=B("linkedin",as);const is=[["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"m19 8 3 8a5 5 0 0 1-6 0zV7",key:"zcdpyk"}],["path",{d:"M3 7h1a17 17 0 0 0 8-2 17 17 0 0 0 8 2h1",key:"1yorad"}],["path",{d:"m5 8 3 8a5 5 0 0 1-6 0zV7",key:"eua70x"}],["path",{d:"M7 21h10",key:"1b0cd5"}]],ns=B("scale",is);const rs=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],he=B("send",rs);const cs=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],os=B("trending-down",cs);function ds(){const[a,m]=C.useState([]),[p,r]=C.useState([]),[n,u]=C.useState([]),[i,g]=C.useState([]),[v,x]=C.useState([]),[c,l]=C.useState([]),[d,o]=C.useState(null),[k,b]=C.useState(!0),[E,D]=C.useState({candidates:{total:0,available:0,placed:0},companies:{total:0,active:0},missions:{total:0,open:0,filled:0},invoices:{total:0,pending:0,paid:0,revenue:0},pipeline:{}}),P=C.useCallback(async()=>{b(!0);try{const[{data:j},{data:h},{data:N},{data:_},{data:M},{data:T},{data:ee}]=await Promise.all([A.from("candidates").select("*").order("created_at",{ascending:!1}),A.from("companies").select("*").order("created_at",{ascending:!1}),A.from("missions").select("*, companies(name)").order("created_at",{ascending:!1}),A.from("applications").select("*, candidates(*), missions(*, companies(name))").order("updated_at",{ascending:!1}),A.from("invoices").select("*, companies(name), missions(title), candidates(first_name, last_name)").order("created_at",{ascending:!1}),A.from("activities").select("*").order("created_at",{ascending:!1}).limit(50),A.from("ethical_charter").select("*").eq("is_active",!0).maybeSingle()]);m(j||[]),r(h||[]),u(N||[]),g(_||[]),x(M||[]),l(T||[]),o(ee);const se={};(_||[]).forEach(S=>{se[S.stage]=(se[S.stage]||0)+1}),D({candidates:{total:(j||[]).length,available:(j||[]).filter(S=>S.status==="available").length,placed:(j||[]).filter(S=>S.status==="placed").length,inProcess:(j||[]).filter(S=>S.status==="in_process").length},companies:{total:(h||[]).length,active:(h||[]).filter(S=>S.status==="active"||S.status==="vip").length,prospects:(h||[]).filter(S=>S.status==="prospect").length},missions:{total:(N||[]).length,open:(N||[]).filter(S=>S.status==="open"||S.status==="in_progress").length,filled:(N||[]).filter(S=>S.status==="filled").length,urgent:(N||[]).filter(S=>S.priority==="urgent").length},invoices:{total:(M||[]).length,pending:(M||[]).filter(S=>S.status==="sent").length,paid:(M||[]).filter(S=>S.status==="paid").length,revenue:(M||[]).filter(S=>S.status==="paid").reduce((S,te)=>S+Number(te.amount_ttc),0),outstanding:(M||[]).filter(S=>S.status==="sent"||S.status==="overdue").reduce((S,te)=>S+Number(te.amount_ttc),0)},pipeline:se,applications:{total:(_||[]).length,active:(_||[]).filter(S=>S.status==="active").length}})}catch(j){console.error("Error fetching data:",j)}finally{b(!1)}},[]);C.useEffect(()=>{P()},[P]);const L=async j=>{const{data:h,error:N}=await A.from("candidates").insert([j]).select().single();if(N)throw N;return m(_=>[h,..._]),await R("candidate",h.id,"created",`Nouveau candidat: ${h.first_name} ${h.last_name}`),h},w=async(j,h)=>{const{data:N,error:_}=await A.from("candidates").update({...h,updated_at:new Date().toISOString()}).eq("id",j).select().single();if(_)throw _;return m(M=>M.map(T=>T.id===j?N:T)),await R("candidate",j,"updated","Candidat mis à jour"),N},s=async j=>{const{error:h}=await A.from("candidates").delete().eq("id",j);if(h)throw h;m(N=>N.filter(_=>_.id!==j))},t=async j=>{const{data:h,error:N}=await A.from("companies").insert([j]).select().single();if(N)throw N;return r(_=>[h,..._]),await R("company",h.id,"created",`Nouvelle entreprise: ${h.name}`),h},f=async(j,h)=>{const{data:N,error:_}=await A.from("companies").update(h).eq("id",j).select().single();if(_)throw _;return r(M=>M.map(T=>T.id===j?N:T)),N},I=async j=>{const{error:h}=await A.from("companies").delete().eq("id",j);if(h)throw h;r(N=>N.filter(_=>_.id!==j))},F=async j=>{const{data:h,error:N}=await A.from("missions").insert([j]).select("*, companies(name)").single();if(N)throw N;return u(_=>[h,..._]),await R("mission",h.id,"created",`Nouvelle mission: ${h.title}`),h},Z=async(j,h)=>{const{data:N,error:_}=await A.from("missions").update({...h,updated_at:new Date().toISOString()}).eq("id",j).select("*, companies(name)").single();if(_)throw _;return u(M=>M.map(T=>T.id===j?N:T)),N},Ae=async j=>{const{error:h}=await A.from("missions").delete().eq("id",j);if(h)throw h;u(N=>N.filter(_=>_.id!==j))},De=async j=>{const{data:h,error:N}=await A.from("applications").insert([j]).select("*, candidates(*), missions(*, companies(name))").single();if(N)throw N;return g(_=>[h,..._]),await R("application",h.id,"created","Candidature créée"),h},Te=async(j,h)=>{const{data:N,error:_}=await A.from("applications").update({...h,updated_at:new Date().toISOString()}).eq("id",j).select("*, candidates(*), missions(*, companies(name))").single();if(_)throw _;return g(M=>M.map(T=>T.id===j?N:T)),h.stage&&await R("application",j,"stage_changed",`Étape: ${h.stage}`),N},Pe=async j=>{const{error:h}=await A.from("applications").delete().eq("id",j);if(h)throw h;g(N=>N.filter(_=>_.id!==j))},Le=async j=>{const h=`EH-${new Date().getFullYear()}-${String(v.length+1).padStart(4,"0")}`,{data:N,error:_}=await A.from("invoices").insert([{...j,invoice_number:h}]).select("*, companies(name), missions(title), candidates(first_name, last_name)").single();if(_)throw _;return x(M=>[N,...M]),await R("invoice",N.id,"created",`Facture ${h} créée`),N},Ie=async(j,h)=>{const{data:N,error:_}=await A.from("invoices").update(h).eq("id",j).select("*, companies(name), missions(title), candidates(first_name, last_name)").single();if(_)throw _;return x(M=>M.map(T=>T.id===j?N:T)),N},R=async(j,h,N,_,M={})=>{const{data:T}=await A.from("activities").insert([{entity_type:j,entity_id:h,action:N,description:_,metadata:M}]).select().single();T&&l(ee=>[T,...ee.slice(0,49)])};return{candidates:a,companies:p,missions:n,applications:i,invoices:v,activities:c,charter:d,loading:k,stats:E,refresh:P,addCandidate:L,updateCandidate:w,deleteCandidate:s,addCompany:t,updateCompany:f,deleteCompany:I,addMission:F,updateMission:Z,deleteMission:Ae,addApplication:De,updateApplication:Te,deleteApplication:Pe,addInvoice:Le,updateInvoice:Ie,logActivity:R,calculateMatchScore:(j,h)=>{let N=0;if(h.required_skills&&j.skills){const _=h.required_skills.filter(M=>j.skills.some(T=>T.toLowerCase().includes(M.toLowerCase())));N+=_.length/h.required_skills.length*40}return h.salary_min&&h.salary_max&&j.salary_expectation&&(j.salary_expectation>=h.salary_min&&j.salary_expectation<=h.salary_max?N+=25:j.salary_expectation<=h.salary_max*1.1&&(N+=15)),h.location&&j.location&&(j.location.toLowerCase().includes(h.location.toLowerCase())||h.location.toLowerCase().includes(j.location.toLowerCase()))&&(N+=20),j.experience_years&&(N+=Math.min(j.experience_years*2,15)),Math.min(Math.round(N),100)}}}const xe=[{id:"sourced",label:"Sourcé",color:"#6B7280",icon:"Search"},{id:"contacted",label:"Contacté",color:"#3B82F6",icon:"Phone"},{id:"phone_screen",label:"Pré-qual",color:"#8B5CF6",icon:"PhoneCall"},{id:"interview_1",label:"Entretien 1",color:"#EC4899",icon:"Users"},{id:"interview_2",label:"Entretien 2",color:"#F59E0B",icon:"UserCheck"},{id:"technical_test",label:"Test Tech",color:"#10B981",icon:"Code"},{id:"reference_check",label:"Références",color:"#06B6D4",icon:"Shield"},{id:"offer",label:"Offre",color:"#84CC16",icon:"FileText"},{id:"negotiation",label:"Négo",color:"#F97316",icon:"MessageSquare"},{id:"hired",label:"Placé",color:"#22C55E",icon:"Trophy"}],H=[{id:"available",label:"Disponible",color:"#22C55E"},{id:"in_process",label:"En process",color:"#F59E0B"},{id:"placed",label:"Placé",color:"#3B82F6"},{id:"inactive",label:"Inactif",color:"#6B7280"}],J=[{id:"draft",label:"Brouillon",color:"#6B7280"},{id:"open",label:"Ouverte",color:"#22C55E"},{id:"in_progress",label:"En cours",color:"#3B82F6"},{id:"on_hold",label:"En pause",color:"#F59E0B"},{id:"filled",label:"Pourvue",color:"#8B5CF6"},{id:"cancelled",label:"Annulée",color:"#EF4444"}],ke=[{id:"low",label:"Basse",color:"#6B7280"},{id:"medium",label:"Normale",color:"#3B82F6"},{id:"high",label:"Haute",color:"#F59E0B"},{id:"urgent",label:"Urgente",color:"#EF4444"}],Se=[{id:"cdi",label:"CDI"},{id:"cdd",label:"CDD"},{id:"freelance",label:"Freelance"},{id:"interim",label:"Intérim"},{id:"stage",label:"Stage"}],ms=[{id:"onsite",label:"Présentiel"},{id:"hybrid",label:"Hybride"},{id:"full_remote",label:"100% Remote"}],Ee=[{id:"startup",label:"Startup (1-50)"},{id:"pme",label:"PME (50-250)"},{id:"eti",label:"ETI (250-5000)"},{id:"grand_groupe",label:"Grand Groupe (5000+)"}],Q=[{id:"prospect",label:"Prospect",color:"#6B7280"},{id:"active",label:"Client actif",color:"#22C55E"},{id:"vip",label:"Client VIP",color:"#F59E0B"},{id:"inactive",label:"Inactif",color:"#EF4444"}],ue=[{id:"draft",label:"Brouillon",color:"#6B7280"},{id:"sent",label:"Envoyée",color:"#3B82F6"},{id:"paid",label:"Payée",color:"#22C55E"},{id:"overdue",label:"En retard",color:"#EF4444"},{id:"cancelled",label:"Annulée",color:"#6B7280"}],Me=["JavaScript","TypeScript","React","Vue.js","Angular","Node.js","Python","Java","C#",".NET","PHP","Ruby","Go","Rust","SQL","PostgreSQL","MongoDB","Redis","Elasticsearch","AWS","Azure","GCP","Docker","Kubernetes","Agile","Scrum","DevOps","CI/CD","Git","Management","Leadership","Communication","Négociation","Finance","Marketing","Sales","HR","Legal","UX Design","UI Design","Product Management","Data Science","Machine Learning","AI","Blockchain","Cybersecurity"],xs=["Bruxelles-Capitale","Brabant wallon","Brabant flamand","Hainaut","Liège","Luxembourg","Namur","Flandre occidentale","Flandre orientale","Anvers","Limbourg"],hs=["Tech / IT","Finance / Banque","Pharma / Santé","Industrie","Retail / E-commerce","Conseil","Médias / Communication","Énergie","Transport / Logistique","Immobilier","Éducation","Non-profit / ONG","Public / Gouvernement","Autre"],us={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},X={hidden:{opacity:0,y:20},show:{opacity:1,y:0}};function pe({data:a,onNavigate:m}){const{stats:p,candidates:r,missions:n,applications:u,activities:i,loading:g}=a,v=u.filter(o=>o.status==="hired").slice(0,3),x=n.filter(o=>o.priority==="urgent"&&o.status==="open"),c=i.slice(0,5),l=[{label:"Candidats actifs",value:p.candidates?.available||0,total:p.candidates?.total||0,icon:W,color:"from-sky-500 to-blue-600",trend:"+12%",trendUp:!0},{label:"Missions ouvertes",value:p.missions?.open||0,total:p.missions?.total||0,icon:z,color:"from-violet-500 to-purple-600",trend:"+5%",trendUp:!0},{label:"Entreprises actives",value:p.companies?.active||0,total:p.companies?.total||0,icon:U,color:"from-emerald-500 to-green-600",trend:"+8%",trendUp:!0},{label:"CA du mois",value:`${((p.invoices?.revenue||0)/1e3).toFixed(1)}k`,suffix:"€",icon:K,color:"from-amber-500 to-orange-600",trend:"+23%",trendUp:!0}],d=[{label:"Ajouter candidat",icon:Fe,action:()=>m("candidates")},{label:"Nouvelle mission",icon:z,action:()=>m("missions")},{label:"Voir pipeline",icon:le,action:()=>m("pipeline")},{label:"Facturer",icon:K,action:()=>m("invoices")}];return g?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[...Array(4)].map((o,k)=>e.jsx("div",{className:"hunt-skeleton h-36 rounded-xl"},k))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2 hunt-skeleton h-96 rounded-xl"}),e.jsx("div",{className:"hunt-skeleton h-96 rounded-xl"})]})]}):e.jsxs(y.div,{variants:us,initial:"hidden",animate:"show",className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Tableau de bord"}),e.jsx("p",{className:"text-slate-400 mt-1",children:"Bienvenue sur ETHIK.HUNT"})]}),e.jsx("div",{className:"flex gap-3",children:d.map((o,k)=>e.jsxs(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:o.action,className:"hunt-btn-secondary flex items-center gap-2 text-sm",children:[e.jsx(o.icon,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden md:inline",children:o.label})]},o.label))})]}),e.jsx(y.div,{variants:X,className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:l.map((o,k)=>e.jsxs(y.div,{whileHover:{scale:1.02,y:-4},className:"hunt-stat-card group",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("div",{className:`p-3 rounded-xl bg-gradient-to-br ${o.color} shadow-lg`,children:e.jsx(o.icon,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:`flex items-center gap-1 text-sm font-medium ${o.trendUp?"text-emerald-400":"text-red-400"}`,children:[o.trendUp?e.jsx(qe,{className:"w-4 h-4"}):e.jsx(os,{className:"w-4 h-4"}),o.trend]})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-3xl font-bold",children:[o.value,o.suffix&&e.jsx("span",{className:"text-lg text-slate-400 ml-1",children:o.suffix})]}),e.jsx("p",{className:"text-sm text-slate-400 mt-1",children:o.label}),o.total&&e.jsxs("div",{className:"mt-3",children:[e.jsx("div",{className:"hunt-progress-bar",children:e.jsx("div",{className:"hunt-progress-fill",style:{width:`${o.value/o.total*100}%`}})}),e.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:[o.value," / ",o.total]})]})]})]},o.label))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs(y.div,{variants:X,className:"lg:col-span-2 hunt-card p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Pipeline de recrutement"}),e.jsxs("button",{onClick:()=>m("pipeline"),className:"text-sky-400 hover:text-sky-300 text-sm font-medium flex items-center gap-1",children:["Voir tout ",e.jsx(ge,{className:"w-4 h-4"})]})]}),e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-4",children:xe.slice(0,6).map(o=>{const k=p.pipeline?.[o.id]||0;return e.jsxs("div",{className:"flex-shrink-0 w-36 p-4 rounded-xl bg-slate-800/50 border border-slate-700 hover:border-slate-600 transition-colors",children:[e.jsx("div",{className:"w-3 h-3 rounded-full mb-3",style:{backgroundColor:o.color}}),e.jsx("p",{className:"text-2xl font-bold",children:k}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:o.label})]},o.id)})}),e.jsxs("div",{className:"mt-6 pt-6 border-t border-slate-700",children:[e.jsx("h3",{className:"text-sm font-semibold text-slate-400 uppercase tracking-wider mb-4",children:"Missions urgentes"}),x.length===0?e.jsx("p",{className:"text-slate-500 text-sm",children:"Aucune mission urgente"}):e.jsx("div",{className:"space-y-3",children:x.slice(0,3).map(o=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-red-500/10 border border-red-500/30",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ie,{className:"w-5 h-5 text-red-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:o.title}),e.jsx("p",{className:"text-sm text-slate-400",children:o.companies?.name})]})]}),e.jsx("span",{className:"text-xs font-bold text-red-400 uppercase",children:"Urgent"})]},o.id))})]})]}),e.jsxs(y.div,{variants:X,className:"space-y-6",children:[e.jsxs("div",{className:"hunt-card p-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Activite recente"}),e.jsx("div",{className:"space-y-4",children:c.length===0?e.jsx("p",{className:"text-slate-500 text-sm",children:"Aucune activite recente"}):c.map(o=>e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-800 flex items-center justify-center flex-shrink-0",children:e.jsx(le,{className:"w-4 h-4 text-sky-400"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-sm truncate",children:o.description}),e.jsx("p",{className:"text-xs text-slate-500",children:new Date(o.created_at).toLocaleString("fr-BE",{day:"2-digit",month:"short",hour:"2-digit",minute:"2-digit"})})]})]},o.id))})]}),e.jsxs("div",{className:"hunt-card p-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Placements recents"}),v.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ne,{className:"w-12 h-12 text-slate-600 mx-auto mb-3"}),e.jsx("p",{className:"text-slate-500 text-sm",children:"Aucun placement recent"}),e.jsx("p",{className:"text-slate-600 text-xs mt-1",children:"Les placements apparaitront ici"})]}):e.jsx("div",{className:"space-y-3",children:v.map(o=>e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-emerald-500/10 border border-emerald-500/30",children:[e.jsx(Y,{className:"w-5 h-5 text-emerald-400"}),e.jsxs("div",{className:"min-w-0",children:[e.jsxs("p",{className:"font-medium truncate",children:[o.candidates?.first_name," ",o.candidates?.last_name]}),e.jsx("p",{className:"text-sm text-slate-400 truncate",children:o.missions?.title})]})]},o.id))})]})]})]}),e.jsxs(y.div,{variants:X,className:"hunt-card p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Performance globale"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-slate-400",children:"Ce mois"}),e.jsxs("select",{className:"hunt-select w-auto text-sm py-2",children:[e.jsx("option",{children:"Janvier 2026"}),e.jsx("option",{children:"Decembre 2025"}),e.jsx("option",{children:"Novembre 2025"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"text-center p-4 rounded-xl bg-slate-800/30",children:[e.jsx("p",{className:"text-4xl font-bold hunt-gradient-text",children:p.applications?.total||0}),e.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Candidatures traitees"})]}),e.jsxs("div",{className:"text-center p-4 rounded-xl bg-slate-800/30",children:[e.jsx("p",{className:"text-4xl font-bold text-emerald-400",children:u.filter(o=>o.status==="hired").length}),e.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Placements reussis"})]}),e.jsxs("div",{className:"text-center p-4 rounded-xl bg-slate-800/30",children:[e.jsx("p",{className:"text-4xl font-bold text-amber-400",children:p.invoices?.pending||0}),e.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Factures en attente"})]}),e.jsxs("div",{className:"text-center p-4 rounded-xl bg-slate-800/30",children:[e.jsxs("p",{className:"text-4xl font-bold text-violet-400",children:[((p.invoices?.outstanding||0)/1e3).toFixed(1),"k€"]}),e.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Montant a recevoir"})]})]})]})]})}function ps({data:a}){const{candidates:m,addCandidate:p,updateCandidate:r,deleteCandidate:n,loading:u}=a,[i,g]=C.useState(""),[v,x]=C.useState("all"),[c,l]=C.useState(!1),[d,o]=C.useState(null),[k,b]=C.useState(null),E=m.filter(t=>{const f=`${t.first_name} ${t.last_name}`.toLowerCase().includes(i.toLowerCase())||t.email?.toLowerCase().includes(i.toLowerCase())||t.title?.toLowerCase().includes(i.toLowerCase())||t.skills?.some(F=>F.toLowerCase().includes(i.toLowerCase())),I=v==="all"||t.status===v;return f&&I}),D=async t=>{try{d?await r(d.id,t):await p(t),l(!1),o(null)}catch(f){console.error("Error saving candidate:",f)}},P=async t=>{confirm("Supprimer ce candidat ?")&&(await n(t),b(null))},L=t=>H.find(f=>f.id===t)?.color||"#6B7280",w=t=>H.find(f=>f.id===t)?.label||t,s=(t,f)=>`${t?.[0]||""}${f?.[0]||""}`.toUpperCase();return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Vivier de Talents"}),e.jsxs("p",{className:"text-slate-400",children:[m.length," candidats dans la base"]})]}),e.jsxs(y.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{o(null),l(!0)},className:"hunt-btn-primary flex items-center gap-2",children:[e.jsx(O,{className:"w-5 h-5"}),"Ajouter un candidat"]})]}),e.jsx("div",{className:"hunt-card p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(G,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-500"}),e.jsx("input",{type:"text",placeholder:"Rechercher par nom, email, competence...",value:i,onChange:t=>g(t.target.value),className:"hunt-input pl-10"})]}),e.jsxs("select",{value:v,onChange:t=>x(t.target.value),className:"hunt-select w-full sm:w-48",children:[e.jsx("option",{value:"all",children:"Tous les statuts"}),H.map(t=>e.jsx("option",{value:t.id,children:t.label},t.id))]}),e.jsxs("button",{className:"hunt-btn-secondary flex items-center gap-2",children:[e.jsx(be,{className:"w-4 h-4"}),"Exporter"]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:e.jsx(q,{children:E.map(t=>e.jsxs(y.div,{layout:!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},whileHover:{y:-4},className:"hunt-card p-5 cursor-pointer",onClick:()=>b(t),children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"hunt-avatar text-white",style:{backgroundColor:L(t.status)},children:s(t.first_name,t.last_name)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"font-semibold truncate",children:[t.first_name," ",t.last_name]}),t.rating&&e.jsx("div",{className:"flex items-center gap-0.5",children:[...Array(5)].map((f,I)=>e.jsx(Ne,{className:`w-3 h-3 ${I<t.rating?"text-amber-400 fill-amber-400":"text-slate-600"}`},I))})]}),e.jsx("p",{className:"text-sm text-slate-400 truncate",children:t.title||"Non renseigne"}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx("span",{className:"hunt-badge",style:{backgroundColor:`${L(t.status)}20`,color:L(t.status)},children:w(t.status)}),t.experience_years>0&&e.jsxs("span",{className:"text-xs text-slate-500",children:[t.experience_years," ans exp."]})]})]})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-700 space-y-2",children:[t.location&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-400",children:[e.jsx(V,{className:"w-4 h-4"}),e.jsx("span",{className:"truncate",children:t.location})]}),t.email&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-400",children:[e.jsx(re,{className:"w-4 h-4"}),e.jsx("span",{className:"truncate",children:t.email})]})]}),t.skills?.length>0&&e.jsxs("div",{className:"mt-4 flex flex-wrap gap-1",children:[t.skills.slice(0,4).map((f,I)=>e.jsx("span",{className:"px-2 py-1 text-xs rounded-md bg-slate-800 text-slate-300",children:f},I)),t.skills.length>4&&e.jsxs("span",{className:"px-2 py-1 text-xs rounded-md bg-slate-800 text-slate-500",children:["+",t.skills.length-4]})]})]},t.id))})}),E.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ge,{className:"w-16 h-16 text-slate-700 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-slate-400",children:"Aucun candidat trouve"}),e.jsx("p",{className:"text-slate-500 mt-1",children:"Modifiez vos filtres ou ajoutez un nouveau candidat"})]}),e.jsxs(q,{children:[c&&e.jsx(js,{candidate:d,onSave:D,onClose:()=>{l(!1),o(null)}}),k&&e.jsx(gs,{candidate:k,onEdit:()=>{o(k),l(!0),b(null)},onDelete:()=>P(k.id),onClose:()=>b(null)})]})]})}function js({candidate:a,onSave:m,onClose:p}){const[r,n]=C.useState({first_name:a?.first_name||"",last_name:a?.last_name||"",email:a?.email||"",phone:a?.phone||"",location:a?.location||"",title:a?.title||"",experience_years:a?.experience_years||0,salary_expectation:a?.salary_expectation||"",availability:a?.availability||"immediate",status:a?.status||"available",skills:a?.skills||[],languages:a?.languages||[],education:a?.education||"",linkedin_url:a?.linkedin_url||"",notes:a?.notes||"",source:a?.source||"",gdpr_consent:a?.gdpr_consent||!1}),[u,i]=C.useState(""),g=c=>{c.preventDefault(),m({...r,gdpr_consent_date:r.gdpr_consent?new Date().toISOString():null})},v=c=>{c&&!r.skills.includes(c)&&n({...r,skills:[...r.skills,c]}),i("")},x=c=>{n({...r,skills:r.skills.filter(l=>l!==c)})};return e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"hunt-modal-overlay",onClick:p,children:e.jsxs(y.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"hunt-modal max-w-2xl",onClick:c=>c.stopPropagation(),children:[e.jsxs("div",{className:"hunt-modal-header",children:[e.jsx("h2",{className:"text-xl font-semibold",children:a?"Modifier le candidat":"Nouveau candidat"}),e.jsx("button",{onClick:p,className:"p-2 hover:bg-slate-700 rounded-lg",children:e.jsx($,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:g,children:[e.jsxs("div",{className:"hunt-modal-body space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Prenom *"}),e.jsx("input",{type:"text",value:r.first_name,onChange:c=>n({...r,first_name:c.target.value}),className:"hunt-input",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Nom *"}),e.jsx("input",{type:"text",value:r.last_name,onChange:c=>n({...r,last_name:c.target.value}),className:"hunt-input",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Email *"}),e.jsx("input",{type:"email",value:r.email,onChange:c=>n({...r,email:c.target.value}),className:"hunt-input",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Telephone"}),e.jsx("input",{type:"tel",value:r.phone,onChange:c=>n({...r,phone:c.target.value}),className:"hunt-input"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Titre / Poste"}),e.jsx("input",{type:"text",value:r.title,onChange:c=>n({...r,title:c.target.value}),className:"hunt-input",placeholder:"Ex: Developpeur Full Stack"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Localisation"}),e.jsxs("select",{value:r.location,onChange:c=>n({...r,location:c.target.value}),className:"hunt-select",children:[e.jsx("option",{value:"",children:"Selectionner..."}),xs.map(c=>e.jsx("option",{value:c,children:c},c))]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Experience (ans)"}),e.jsx("input",{type:"number",value:r.experience_years,onChange:c=>n({...r,experience_years:parseInt(c.target.value)||0}),className:"hunt-input",min:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Pretentions (€/an)"}),e.jsx("input",{type:"number",value:r.salary_expectation,onChange:c=>n({...r,salary_expectation:parseInt(c.target.value)||""}),className:"hunt-input",placeholder:"Ex: 45000"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Statut"}),e.jsx("select",{value:r.status,onChange:c=>n({...r,status:c.target.value}),className:"hunt-select",children:H.map(c=>e.jsx("option",{value:c.id,children:c.label},c.id))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Competences"}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:r.skills.map((c,l)=>e.jsxs("span",{className:"px-3 py-1 rounded-full bg-sky-500/20 text-sky-400 text-sm flex items-center gap-1",children:[c,e.jsx("button",{type:"button",onClick:()=>x(c),children:e.jsx($,{className:"w-3 h-3"})})]},l))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:u,onChange:c=>i(c.target.value),onKeyDown:c=>c.key==="Enter"&&(c.preventDefault(),v(u)),className:"hunt-input flex-1",placeholder:"Ajouter une competence...",list:"skills-suggestions"}),e.jsx("datalist",{id:"skills-suggestions",children:Me.filter(c=>!r.skills.includes(c)).map(c=>e.jsx("option",{value:c},c))}),e.jsx("button",{type:"button",onClick:()=>v(u),className:"hunt-btn-secondary",children:e.jsx(O,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"LinkedIn"}),e.jsx("input",{type:"url",value:r.linkedin_url,onChange:c=>n({...r,linkedin_url:c.target.value}),className:"hunt-input",placeholder:"https://linkedin.com/in/..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Notes"}),e.jsx("textarea",{value:r.notes,onChange:c=>n({...r,notes:c.target.value}),className:"hunt-input min-h-[100px] resize-y",placeholder:"Notes internes sur le candidat..."})]}),e.jsxs("div",{className:"flex items-center gap-3 p-4 rounded-lg bg-emerald-500/10 border border-emerald-500/30",children:[e.jsx("input",{type:"checkbox",id:"gdpr",checked:r.gdpr_consent,onChange:c=>n({...r,gdpr_consent:c.target.checked}),className:"w-5 h-5 rounded"}),e.jsx("label",{htmlFor:"gdpr",className:"text-sm",children:"Le candidat a donne son consentement RGPD pour le traitement de ses donnees"})]})]}),e.jsxs("div",{className:"hunt-modal-footer",children:[e.jsx("button",{type:"button",onClick:p,className:"hunt-btn-secondary",children:"Annuler"}),e.jsx("button",{type:"submit",className:"hunt-btn-primary",children:a?"Enregistrer":"Creer le candidat"})]})]})]})})}function gs({candidate:a,onEdit:m,onDelete:p,onClose:r}){return e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"hunt-modal-overlay",onClick:r,children:e.jsxs(y.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",damping:25},className:"fixed right-0 top-0 bottom-0 w-full max-w-xl bg-slate-900 border-l border-slate-700 overflow-y-auto",onClick:n=>n.stopPropagation(),children:[e.jsxs("div",{className:"p-6 border-b border-slate-700 flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Details du candidat"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:m,className:"p-2 hover:bg-slate-800 rounded-lg",children:e.jsx(de,{className:"w-5 h-5"})}),e.jsx("button",{onClick:p,className:"p-2 hover:bg-red-500/20 rounded-lg text-red-400",children:e.jsx(ce,{className:"w-5 h-5"})}),e.jsx("button",{onClick:r,className:"p-2 hover:bg-slate-800 rounded-lg",children:e.jsx($,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-sky-500 to-violet-500 flex items-center justify-center text-white text-xl font-bold",children:[a.first_name?.[0],a.last_name?.[0]]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-2xl font-bold",children:[a.first_name," ",a.last_name]}),e.jsx("p",{className:"text-slate-400",children:a.title||"Titre non renseigne"}),a.rating&&e.jsx("div",{className:"flex items-center gap-1 mt-1",children:[...Array(5)].map((n,u)=>e.jsx(Ne,{className:`w-4 h-4 ${u<a.rating?"text-amber-400 fill-amber-400":"text-slate-600"}`},u))})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 rounded-lg bg-slate-800/50",children:[e.jsx("p",{className:"text-sm text-slate-400 mb-1",children:"Statut"}),e.jsx("span",{className:"hunt-badge",style:{backgroundColor:`${H.find(n=>n.id===a.status)?.color}20`,color:H.find(n=>n.id===a.status)?.color},children:H.find(n=>n.id===a.status)?.label})]}),e.jsxs("div",{className:"p-4 rounded-lg bg-slate-800/50",children:[e.jsx("p",{className:"text-sm text-slate-400 mb-1",children:"Experience"}),e.jsxs("p",{className:"font-semibold",children:[a.experience_years||0," ans"]})]}),e.jsxs("div",{className:"p-4 rounded-lg bg-slate-800/50",children:[e.jsx("p",{className:"text-sm text-slate-400 mb-1",children:"Pretentions"}),e.jsx("p",{className:"font-semibold",children:a.salary_expectation?`${a.salary_expectation.toLocaleString()} €/an`:"Non renseigne"})]}),e.jsxs("div",{className:"p-4 rounded-lg bg-slate-800/50",children:[e.jsx("p",{className:"text-sm text-slate-400 mb-1",children:"Disponibilite"}),e.jsx("p",{className:"font-semibold capitalize",children:a.availability||"Immediate"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-semibold",children:"Contact"}),a.email&&e.jsxs("a",{href:`mailto:${a.email}`,className:"flex items-center gap-3 p-3 rounded-lg bg-slate-800/50 hover:bg-slate-800 transition-colors",children:[e.jsx(re,{className:"w-5 h-5 text-sky-400"}),e.jsx("span",{children:a.email})]}),a.phone&&e.jsxs("a",{href:`tel:${a.phone}`,className:"flex items-center gap-3 p-3 rounded-lg bg-slate-800/50 hover:bg-slate-800 transition-colors",children:[e.jsx(ve,{className:"w-5 h-5 text-emerald-400"}),e.jsx("span",{children:a.phone})]}),a.location&&e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-slate-800/50",children:[e.jsx(V,{className:"w-5 h-5 text-amber-400"}),e.jsx("span",{children:a.location})]}),a.linkedin_url&&e.jsxs("a",{href:a.linkedin_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 p-3 rounded-lg bg-slate-800/50 hover:bg-slate-800 transition-colors",children:[e.jsx(ls,{className:"w-5 h-5 text-blue-400"}),e.jsx("span",{children:"Profil LinkedIn"})]})]}),a.skills?.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-3",children:"Competences"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:a.skills.map((n,u)=>e.jsx("span",{className:"px-3 py-1 rounded-full bg-sky-500/20 text-sky-400 text-sm",children:n},u))})]}),a.notes&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-3",children:"Notes"}),e.jsx("div",{className:"p-4 rounded-lg bg-slate-800/50 text-slate-300 whitespace-pre-wrap",children:a.notes})]}),a.gdpr_consent&&e.jsxs("div",{className:"flex items-center gap-2 text-emerald-400 text-sm",children:[e.jsx(ae,{className:"w-4 h-4"}),"Consentement RGPD obtenu le ",new Date(a.gdpr_consent_date).toLocaleDateString("fr-BE")]})]})]})})}function bs({data:a}){const{companies:m,missions:p,addCompany:r,updateCompany:n,deleteCompany:u}=a,[i,g]=C.useState(""),[v,x]=C.useState("all"),[c,l]=C.useState(!1),[d,o]=C.useState(null),[k,b]=C.useState(null),E=m.filter(s=>{const t=s.name.toLowerCase().includes(i.toLowerCase())||s.industry?.toLowerCase().includes(i.toLowerCase()),f=v==="all"||s.status===v;return t&&f}),D=s=>p.filter(t=>t.company_id===s),P=async s=>{try{d?await n(d.id,s):await r(s),l(!1),o(null)}catch(t){console.error("Error saving company:",t)}},L=async s=>{confirm("Supprimer cette entreprise et toutes ses missions ?")&&(await u(s),b(null))},w=s=>Q.find(t=>t.id===s)||{label:s,color:"#6B7280"};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Entreprises"}),e.jsxs("p",{className:"text-slate-400",children:[m.length," entreprises dans le portefeuille"]})]}),e.jsxs(y.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{o(null),l(!0)},className:"hunt-btn-primary flex items-center gap-2",children:[e.jsx(O,{className:"w-5 h-5"}),"Nouvelle entreprise"]})]}),e.jsx("div",{className:"hunt-card p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(G,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-500"}),e.jsx("input",{type:"text",placeholder:"Rechercher par nom, secteur...",value:i,onChange:s=>g(s.target.value),className:"hunt-input pl-10"})]}),e.jsxs("select",{value:v,onChange:s=>x(s.target.value),className:"hunt-select w-full sm:w-48",children:[e.jsx("option",{value:"all",children:"Tous les statuts"}),Q.map(s=>e.jsx("option",{value:s.id,children:s.label},s.id))]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:e.jsx(q,{children:E.map(s=>{const t=w(s.status),I=D(s.id).filter(F=>F.status==="open"||F.status==="in_progress").length;return e.jsxs(y.div,{layout:!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},whileHover:{y:-4},className:"hunt-card p-5 cursor-pointer relative",onClick:()=>b(s),children:[s.status==="vip"&&e.jsx("div",{className:"absolute top-3 right-3",children:e.jsx($e,{className:"w-5 h-5 text-amber-400"})}),e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-slate-700 to-slate-800 flex items-center justify-center text-white font-bold border border-slate-600",children:s.name.substring(0,2).toUpperCase()}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold truncate",children:s.name}),e.jsx("p",{className:"text-sm text-slate-400",children:s.industry||"Non renseigne"}),e.jsx("div",{className:"flex items-center gap-2 mt-2",children:e.jsx("span",{className:"hunt-badge",style:{backgroundColor:`${t.color}20`,color:t.color},children:t.label})})]})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-700 grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500",children:"Missions actives"}),e.jsx("p",{className:"font-semibold",children:I})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500",children:"Commission"}),e.jsxs("p",{className:"font-semibold",children:[s.commission_rate||18,"%"]})]})]}),s.location&&e.jsxs("div",{className:"mt-3 flex items-center gap-2 text-sm text-slate-400",children:[e.jsx(V,{className:"w-4 h-4"}),e.jsx("span",{className:"truncate",children:s.location})]})]},s.id)})})}),E.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(U,{className:"w-16 h-16 text-slate-700 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-slate-400",children:"Aucune entreprise trouvee"}),e.jsx("p",{className:"text-slate-500 mt-1",children:"Modifiez vos filtres ou ajoutez une nouvelle entreprise"})]}),e.jsxs(q,{children:[c&&e.jsx(Ns,{company:d,onSave:P,onClose:()=>{l(!1),o(null)}}),k&&e.jsx(vs,{company:k,missions:D(k.id),onEdit:()=>{o(k),l(!0),b(null)},onDelete:()=>L(k.id),onClose:()=>b(null)})]})]})}function Ns({company:a,onSave:m,onClose:p}){const[r,n]=C.useState({name:a?.name||"",industry:a?.industry||"",size:a?.size||"",website:a?.website||"",location:a?.location||"",description:a?.description||"",values:a?.values||"",status:a?.status||"prospect",billing_address:a?.billing_address||"",vat_number:a?.vat_number||"",payment_terms:a?.payment_terms||30,commission_rate:a?.commission_rate||18,notes:a?.notes||""}),u=i=>{i.preventDefault(),m(r)};return e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"hunt-modal-overlay",onClick:p,children:e.jsxs(y.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"hunt-modal max-w-2xl",onClick:i=>i.stopPropagation(),children:[e.jsxs("div",{className:"hunt-modal-header",children:[e.jsx("h2",{className:"text-xl font-semibold",children:a?"Modifier l'entreprise":"Nouvelle entreprise"}),e.jsx("button",{onClick:p,className:"p-2 hover:bg-slate-700 rounded-lg",children:e.jsx($,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:u,children:[e.jsxs("div",{className:"hunt-modal-body space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Nom *"}),e.jsx("input",{type:"text",value:r.name,onChange:i=>n({...r,name:i.target.value}),className:"hunt-input",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Secteur"}),e.jsxs("select",{value:r.industry,onChange:i=>n({...r,industry:i.target.value}),className:"hunt-select",children:[e.jsx("option",{value:"",children:"Selectionner..."}),hs.map(i=>e.jsx("option",{value:i,children:i},i))]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Taille"}),e.jsxs("select",{value:r.size,onChange:i=>n({...r,size:i.target.value}),className:"hunt-select",children:[e.jsx("option",{value:"",children:"Selectionner..."}),Ee.map(i=>e.jsx("option",{value:i.id,children:i.label},i.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Statut"}),e.jsx("select",{value:r.status,onChange:i=>n({...r,status:i.target.value}),className:"hunt-select",children:Q.map(i=>e.jsx("option",{value:i.id,children:i.label},i.id))})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Site web"}),e.jsx("input",{type:"url",value:r.website,onChange:i=>n({...r,website:i.target.value}),className:"hunt-input",placeholder:"https://..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Localisation"}),e.jsx("input",{type:"text",value:r.location,onChange:i=>n({...r,location:i.target.value}),className:"hunt-input"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Description"}),e.jsx("textarea",{value:r.description,onChange:i=>n({...r,description:i.target.value}),className:"hunt-input min-h-[80px] resize-y"})]}),e.jsxs("div",{className:"p-4 rounded-lg bg-slate-800/50 space-y-4",children:[e.jsx("h3",{className:"font-semibold",children:"Informations commerciales"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Commission %"}),e.jsx("input",{type:"number",value:r.commission_rate,onChange:i=>n({...r,commission_rate:parseFloat(i.target.value)||18}),className:"hunt-input",step:"0.5",min:"0",max:"100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Delai paiement (j)"}),e.jsx("input",{type:"number",value:r.payment_terms,onChange:i=>n({...r,payment_terms:parseInt(i.target.value)||30}),className:"hunt-input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"N° TVA"}),e.jsx("input",{type:"text",value:r.vat_number,onChange:i=>n({...r,vat_number:i.target.value}),className:"hunt-input",placeholder:"BE0XXX.XXX.XXX"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Adresse facturation"}),e.jsx("textarea",{value:r.billing_address,onChange:i=>n({...r,billing_address:i.target.value}),className:"hunt-input min-h-[60px] resize-y"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Notes internes"}),e.jsx("textarea",{value:r.notes,onChange:i=>n({...r,notes:i.target.value}),className:"hunt-input min-h-[80px] resize-y"})]})]}),e.jsxs("div",{className:"hunt-modal-footer",children:[e.jsx("button",{type:"button",onClick:p,className:"hunt-btn-secondary",children:"Annuler"}),e.jsx("button",{type:"submit",className:"hunt-btn-primary",children:a?"Enregistrer":"Creer l'entreprise"})]})]})]})})}function vs({company:a,missions:m,onEdit:p,onDelete:r,onClose:n}){const u=Q.find(g=>g.id===a.status)||{label:a.status,color:"#6B7280"},i=Ee.find(g=>g.id===a.size);return e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"hunt-modal-overlay",onClick:n,children:e.jsxs(y.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",damping:25},className:"fixed right-0 top-0 bottom-0 w-full max-w-xl bg-slate-900 border-l border-slate-700 overflow-y-auto",onClick:g=>g.stopPropagation(),children:[e.jsxs("div",{className:"p-6 border-b border-slate-700 flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Details entreprise"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:p,className:"p-2 hover:bg-slate-800 rounded-lg",children:e.jsx(de,{className:"w-5 h-5"})}),e.jsx("button",{onClick:r,className:"p-2 hover:bg-red-500/20 rounded-lg text-red-400",children:e.jsx(ce,{className:"w-5 h-5"})}),e.jsx("button",{onClick:n,className:"p-2 hover:bg-slate-800 rounded-lg",children:e.jsx($,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-xl bg-gradient-to-br from-sky-500 to-violet-500 flex items-center justify-center text-white text-xl font-bold",children:a.name.substring(0,2).toUpperCase()}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold",children:a.name}),e.jsx("p",{className:"text-slate-400",children:a.industry||"Secteur non renseigne"}),e.jsx("span",{className:"hunt-badge mt-2",style:{backgroundColor:`${u.color}20`,color:u.color},children:u.label})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 rounded-lg bg-slate-800/50",children:[e.jsx("p",{className:"text-sm text-slate-400 mb-1",children:"Taille"}),e.jsx("p",{className:"font-semibold",children:i?.label||"Non renseigne"})]}),e.jsxs("div",{className:"p-4 rounded-lg bg-slate-800/50",children:[e.jsx("p",{className:"text-sm text-slate-400 mb-1",children:"Commission"}),e.jsxs("p",{className:"font-semibold",children:[a.commission_rate||18,"%"]})]}),e.jsxs("div",{className:"p-4 rounded-lg bg-slate-800/50",children:[e.jsx("p",{className:"text-sm text-slate-400 mb-1",children:"Delai paiement"}),e.jsxs("p",{className:"font-semibold",children:[a.payment_terms||30," jours"]})]}),e.jsxs("div",{className:"p-4 rounded-lg bg-slate-800/50",children:[e.jsx("p",{className:"text-sm text-slate-400 mb-1",children:"Missions"}),e.jsx("p",{className:"font-semibold",children:m.length})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-semibold",children:"Contact"}),a.website&&e.jsxs("a",{href:a.website,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 p-3 rounded-lg bg-slate-800/50 hover:bg-slate-800 transition-colors",children:[e.jsx(Be,{className:"w-5 h-5 text-sky-400"}),e.jsx("span",{className:"truncate",children:a.website}),e.jsx(Re,{className:"w-4 h-4 text-slate-500"})]}),a.location&&e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-slate-800/50",children:[e.jsx(V,{className:"w-5 h-5 text-amber-400"}),e.jsx("span",{children:a.location})]})]}),m.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold mb-3",children:["Missions (",m.length,")"]}),e.jsx("div",{className:"space-y-2",children:m.map(g=>e.jsx("div",{className:"p-3 rounded-lg bg-slate-800/50 flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:g.title}),e.jsx("p",{className:"text-sm text-slate-400",children:g.status})]})},g.id))})]}),a.notes&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-3",children:"Notes"}),e.jsx("div",{className:"p-4 rounded-lg bg-slate-800/50 text-slate-300 whitespace-pre-wrap",children:a.notes})]})]})]})})}function fs({data:a}){const{missions:m,companies:p,applications:r,addMission:n,updateMission:u,deleteMission:i}=a,[g,v]=C.useState(""),[x,c]=C.useState("all"),[l,d]=C.useState(!1),[o,k]=C.useState(null),b=m.filter(s=>{const t=s.title.toLowerCase().includes(g.toLowerCase())||s.companies?.name?.toLowerCase().includes(g.toLowerCase()),f=x==="all"||s.status===x;return t&&f}),E=s=>r.filter(t=>t.mission_id===s),D=async s=>{try{o?await u(o.id,s):await n(s),d(!1),k(null)}catch(t){console.error("Error saving mission:",t)}},P=async s=>{confirm("Supprimer cette mission et toutes ses candidatures ?")&&await i(s)},L=s=>J.find(t=>t.id===s)||{label:s,color:"#6B7280"},w=s=>ke.find(t=>t.id===s)||{label:s,color:"#6B7280"};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Missions"}),e.jsxs("p",{className:"text-slate-400",children:[m.filter(s=>s.status==="open"||s.status==="in_progress").length," missions actives"]})]}),e.jsxs(y.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{k(null),d(!0)},className:"hunt-btn-primary flex items-center gap-2",children:[e.jsx(O,{className:"w-5 h-5"}),"Nouvelle mission"]})]}),e.jsx("div",{className:"hunt-card p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(G,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-500"}),e.jsx("input",{type:"text",placeholder:"Rechercher par titre, entreprise...",value:g,onChange:s=>v(s.target.value),className:"hunt-input pl-10"})]}),e.jsxs("select",{value:x,onChange:s=>c(s.target.value),className:"hunt-select w-full sm:w-48",children:[e.jsx("option",{value:"all",children:"Tous les statuts"}),J.map(s=>e.jsx("option",{value:s.id,children:s.label},s.id))]})]})}),e.jsx("div",{className:"space-y-4",children:e.jsx(q,{children:b.map(s=>{const t=L(s.status);w(s.priority);const I=E(s.id).filter(F=>F.status==="active").length;return e.jsxs(y.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"hunt-card p-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.priority==="urgent"&&e.jsxs("span",{className:"flex items-center gap-1 px-2 py-1 rounded-md bg-red-500/20 text-red-400 text-xs font-bold",children:[e.jsx(ie,{className:"w-3 h-3"}),"URGENT"]}),e.jsx("span",{className:"hunt-badge",style:{backgroundColor:`${t.color}20`,color:t.color},children:t.label}),s.exclusivity&&e.jsx("span",{className:"hunt-badge bg-amber-500/20 text-amber-400",children:"Exclusif"})]}),e.jsx("h3",{className:"text-xl font-semibold",children:s.title}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 mt-2 text-sm text-slate-400",children:[s.companies?.name&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(U,{className:"w-4 h-4"}),s.companies.name]}),s.location&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(V,{className:"w-4 h-4"}),s.location]}),s.contract_type&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(z,{className:"w-4 h-4"}),Se.find(F=>F.id===s.contract_type)?.label]}),(s.salary_min||s.salary_max)&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(K,{className:"w-4 h-4"}),s.salary_min?.toLocaleString()," - ",s.salary_max?.toLocaleString()," €"]})]}),s.required_skills?.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-1 mt-3",children:[s.required_skills.slice(0,5).map((F,Z)=>e.jsx("span",{className:"px-2 py-1 text-xs rounded-md bg-sky-500/20 text-sky-400",children:F},Z)),s.required_skills.length>5&&e.jsxs("span",{className:"px-2 py-1 text-xs rounded-md bg-slate-700 text-slate-400",children:["+",s.required_skills.length-5]})]})]}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-sky-400",children:I}),e.jsx("p",{className:"text-xs text-slate-500",children:"Candidats actifs"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"text-2xl font-bold",children:[s.fee_amount||18,"%"]}),e.jsx("p",{className:"text-xs text-slate-500",children:"Commission"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>{k(s),d(!0)},className:"p-2 hover:bg-slate-700 rounded-lg",children:e.jsx(de,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>P(s.id),className:"p-2 hover:bg-red-500/20 rounded-lg text-red-400",children:e.jsx(ce,{className:"w-5 h-5"})})]})]})]}),s.deadline&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-700 flex items-center gap-2 text-sm text-slate-400",children:[e.jsx(Ce,{className:"w-4 h-4"}),"Deadline: ",new Date(s.deadline).toLocaleDateString("fr-BE")]})]},s.id)})})}),b.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(z,{className:"w-16 h-16 text-slate-700 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-slate-400",children:"Aucune mission trouvee"}),e.jsx("p",{className:"text-slate-500 mt-1",children:"Modifiez vos filtres ou creez une nouvelle mission"})]}),e.jsx(q,{children:l&&e.jsx(ys,{mission:o,companies:p,onSave:D,onClose:()=>{d(!1),k(null)}})})]})}function ys({mission:a,companies:m,onSave:p,onClose:r}){const[n,u]=C.useState({company_id:a?.company_id||"",title:a?.title||"",description:a?.description||"",requirements:a?.requirements||"",location:a?.location||"",remote_policy:a?.remote_policy||"hybrid",contract_type:a?.contract_type||"cdi",salary_min:a?.salary_min||"",salary_max:a?.salary_max||"",start_date:a?.start_date||"",deadline:a?.deadline||"",priority:a?.priority||"medium",status:a?.status||"draft",required_skills:a?.required_skills||[],fee_type:a?.fee_type||"percentage",fee_amount:a?.fee_amount||18,exclusivity:a?.exclusivity||!1,notes:a?.notes||""}),[i,g]=C.useState(""),v=l=>{l.preventDefault(),p(n)},x=l=>{l&&!n.required_skills.includes(l)&&u({...n,required_skills:[...n.required_skills,l]}),g("")},c=l=>{u({...n,required_skills:n.required_skills.filter(d=>d!==l)})};return e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"hunt-modal-overlay",onClick:r,children:e.jsxs(y.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"hunt-modal max-w-3xl",onClick:l=>l.stopPropagation(),children:[e.jsxs("div",{className:"hunt-modal-header",children:[e.jsx("h2",{className:"text-xl font-semibold",children:a?"Modifier la mission":"Nouvelle mission"}),e.jsx("button",{onClick:r,className:"p-2 hover:bg-slate-700 rounded-lg",children:e.jsx($,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:v,children:[e.jsxs("div",{className:"hunt-modal-body space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Entreprise *"}),e.jsxs("select",{value:n.company_id,onChange:l=>u({...n,company_id:l.target.value}),className:"hunt-select",required:!0,children:[e.jsx("option",{value:"",children:"Selectionner..."}),m.filter(l=>l.status==="active"||l.status==="vip").map(l=>e.jsx("option",{value:l.id,children:l.name},l.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Titre du poste *"}),e.jsx("input",{type:"text",value:n.title,onChange:l=>u({...n,title:l.target.value}),className:"hunt-input",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Description"}),e.jsx("textarea",{value:n.description,onChange:l=>u({...n,description:l.target.value}),className:"hunt-input min-h-[100px] resize-y"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Type contrat"}),e.jsx("select",{value:n.contract_type,onChange:l=>u({...n,contract_type:l.target.value}),className:"hunt-select",children:Se.map(l=>e.jsx("option",{value:l.id,children:l.label},l.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Teletravail"}),e.jsx("select",{value:n.remote_policy,onChange:l=>u({...n,remote_policy:l.target.value}),className:"hunt-select",children:ms.map(l=>e.jsx("option",{value:l.id,children:l.label},l.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Localisation"}),e.jsx("input",{type:"text",value:n.location,onChange:l=>u({...n,location:l.target.value}),className:"hunt-input"})]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Salaire min (€)"}),e.jsx("input",{type:"number",value:n.salary_min,onChange:l=>u({...n,salary_min:parseInt(l.target.value)||""}),className:"hunt-input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Salaire max (€)"}),e.jsx("input",{type:"number",value:n.salary_max,onChange:l=>u({...n,salary_max:parseInt(l.target.value)||""}),className:"hunt-input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Priorite"}),e.jsx("select",{value:n.priority,onChange:l=>u({...n,priority:l.target.value}),className:"hunt-select",children:ke.map(l=>e.jsx("option",{value:l.id,children:l.label},l.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Statut"}),e.jsx("select",{value:n.status,onChange:l=>u({...n,status:l.target.value}),className:"hunt-select",children:J.map(l=>e.jsx("option",{value:l.id,children:l.label},l.id))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Competences requises"}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:n.required_skills.map((l,d)=>e.jsxs("span",{className:"px-3 py-1 rounded-full bg-sky-500/20 text-sky-400 text-sm flex items-center gap-1",children:[l,e.jsx("button",{type:"button",onClick:()=>c(l),children:e.jsx($,{className:"w-3 h-3"})})]},d))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:i,onChange:l=>g(l.target.value),onKeyDown:l=>l.key==="Enter"&&(l.preventDefault(),x(i)),className:"hunt-input flex-1",placeholder:"Ajouter une competence...",list:"mission-skills"}),e.jsx("datalist",{id:"mission-skills",children:Me.filter(l=>!n.required_skills.includes(l)).map(l=>e.jsx("option",{value:l},l))}),e.jsx("button",{type:"button",onClick:()=>x(i),className:"hunt-btn-secondary",children:e.jsx(O,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Commission %"}),e.jsx("input",{type:"number",value:n.fee_amount,onChange:l=>u({...n,fee_amount:parseFloat(l.target.value)||18}),className:"hunt-input",step:"0.5"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Deadline"}),e.jsx("input",{type:"date",value:n.deadline,onChange:l=>u({...n,deadline:l.target.value}),className:"hunt-input"})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-lg bg-slate-800/50 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:n.exclusivity,onChange:l=>u({...n,exclusivity:l.target.checked}),className:"w-5 h-5 rounded"}),e.jsx("span",{className:"text-sm",children:"Mission exclusive"})]})})]})]}),e.jsxs("div",{className:"hunt-modal-footer",children:[e.jsx("button",{type:"button",onClick:r,className:"hunt-btn-secondary",children:"Annuler"}),e.jsx("button",{type:"submit",className:"hunt-btn-primary",children:a?"Enregistrer":"Creer la mission"})]})]})]})})}function ws({data:a}){const{applications:m,candidates:p,missions:r,updateApplication:n,addApplication:u,calculateMatchScore:i}=a,[g,v]=C.useState("all"),[x,c]=C.useState(null),[l,d]=C.useState(!1),o=r.filter(w=>w.status==="open"||w.status==="in_progress"),k=C.useMemo(()=>g==="all"?m.filter(w=>w.status==="active"):m.filter(w=>w.mission_id===g&&w.status==="active"),[m,g]),b=w=>k.filter(s=>s.stage===w),E=(w,s)=>{c(s),w.dataTransfer.effectAllowed="move"},D=w=>{w.preventDefault(),w.dataTransfer.dropEffect="move"},P=async(w,s)=>{w.preventDefault(),x&&x.stage!==s&&await n(x.id,{stage:s}),c(null)},L=w=>w>=80?"from-emerald-500 to-green-600":w>=60?"from-sky-500 to-blue-600":w>=40?"from-amber-500 to-orange-600":"from-slate-500 to-slate-600";return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Pipeline de Recrutement"}),e.jsxs("p",{className:"text-slate-400",children:[k.length," candidatures actives"]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("select",{value:g,onChange:w=>v(w.target.value),className:"hunt-select w-64",children:[e.jsx("option",{value:"all",children:"Toutes les missions"}),o.map(w=>e.jsxs("option",{value:w.id,children:[w.title," - ",w.companies?.name]},w.id))]}),e.jsxs(y.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>d(!0),className:"hunt-btn-primary flex items-center gap-2",children:[e.jsx(O,{className:"w-5 h-5"}),"Ajouter au pipeline"]})]})]}),e.jsx("div",{className:"flex gap-4 overflow-x-auto pb-4",style:{minHeight:"70vh"},children:xe.map(w=>{const s=b(w.id);return e.jsxs("div",{className:"hunt-pipeline-column flex-shrink-0 w-72",onDragOver:D,onDrop:t=>P(t,w.id),children:[e.jsxs("div",{className:"hunt-pipeline-header",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:w.color}}),e.jsx("span",{className:"font-semibold text-sm",children:w.label})]}),e.jsx("span",{className:"text-sm font-bold text-slate-400 bg-slate-800 px-2 py-1 rounded",children:s.length})]}),e.jsxs("div",{className:"p-2 space-y-2 max-h-[calc(70vh-60px)] overflow-y-auto",children:[e.jsx(q,{children:s.map(t=>e.jsxs(y.div,{layout:!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},draggable:!0,onDragStart:f=>E(f,t),className:`hunt-pipeline-card ${x?.id===t.id?"opacity-50":""}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-sky-500 to-violet-500 flex items-center justify-center text-white text-xs font-bold",children:[t.candidates?.first_name?.[0],t.candidates?.last_name?.[0]]}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-sm",children:[t.candidates?.first_name," ",t.candidates?.last_name]}),e.jsx("p",{className:"text-xs text-slate-500",children:t.candidates?.title||"N/A"})]})]}),t.match_score&&e.jsx("div",{className:`hunt-score-ring bg-gradient-to-br ${L(t.match_score)}`,children:e.jsx("span",{className:"text-white",children:t.match_score})})]}),e.jsxs("div",{className:"text-xs text-slate-400 mb-2 flex items-center gap-1",children:[e.jsx(z,{className:"w-3 h-3"}),e.jsx("span",{className:"truncate",children:t.missions?.title})]}),t.missions?.companies?.name&&e.jsxs("div",{className:"text-xs text-slate-500 flex items-center gap-1",children:[e.jsx(U,{className:"w-3 h-3"}),e.jsx("span",{className:"truncate",children:t.missions.companies.name})]}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-slate-700 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[t.candidates?.email&&e.jsx("a",{href:`mailto:${t.candidates.email}`,className:"p-1.5 hover:bg-slate-700 rounded",onClick:f=>f.stopPropagation(),children:e.jsx(re,{className:"w-3.5 h-3.5 text-slate-400"})}),t.candidates?.phone&&e.jsx("a",{href:`tel:${t.candidates.phone}`,className:"p-1.5 hover:bg-slate-700 rounded",onClick:f=>f.stopPropagation(),children:e.jsx(ve,{className:"w-3.5 h-3.5 text-slate-400"})})]}),e.jsx("span",{className:"text-xs text-slate-500",children:new Date(t.updated_at).toLocaleDateString("fr-BE",{day:"2-digit",month:"short"})})]})]},t.id))}),s.length===0&&e.jsx("div",{className:"text-center py-8 text-slate-600 text-sm",children:"Aucune candidature"})]})]},w.id)})}),e.jsx(q,{children:l&&e.jsx(Cs,{candidates:p.filter(w=>w.status==="available"),missions:o,existingApplications:m,onAdd:u,calculateMatchScore:i,onClose:()=>d(!1)})})]})}function Cs({candidates:a,missions:m,existingApplications:p,onAdd:r,calculateMatchScore:n,onClose:u}){const[i,g]=C.useState(""),[v,x]=C.useState(""),[c,l]=C.useState(""),d=a.filter(b=>`${b.first_name} ${b.last_name}`.toLowerCase().includes(c.toLowerCase())||b.title?.toLowerCase().includes(c.toLowerCase())),o=i&&v&&!p.some(b=>b.candidate_id===i&&b.mission_id===v),k=async()=>{if(!o)return;const b=a.find(P=>P.id===i),E=m.find(P=>P.id===v),D=n(b,E);await r({candidate_id:i,mission_id:v,stage:"sourced",status:"active",match_score:D,source:"internal"}),u()};return e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"hunt-modal-overlay",onClick:u,children:e.jsxs(y.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"hunt-modal max-w-lg",onClick:b=>b.stopPropagation(),children:[e.jsxs("div",{className:"hunt-modal-header",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Ajouter au pipeline"}),e.jsx("button",{onClick:u,className:"p-2 hover:bg-slate-700 rounded-lg",children:e.jsx($,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"hunt-modal-body space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Mission *"}),e.jsxs("select",{value:v,onChange:b=>x(b.target.value),className:"hunt-select",children:[e.jsx("option",{value:"",children:"Selectionner une mission..."}),m.map(b=>e.jsxs("option",{value:b.id,children:[b.title," - ",b.companies?.name]},b.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Candidat *"}),e.jsx("input",{type:"text",placeholder:"Rechercher un candidat...",value:c,onChange:b=>l(b.target.value),className:"hunt-input mb-3"}),e.jsx("div",{className:"max-h-64 overflow-y-auto space-y-2",children:d.map(b=>{const E=p.some(D=>D.candidate_id===b.id&&D.mission_id===v);return e.jsx("button",{type:"button",onClick:()=>!E&&g(b.id),disabled:E,className:`w-full p-3 rounded-lg text-left transition-all ${i===b.id?"bg-sky-500/20 border-sky-500 border":E?"bg-slate-800/30 opacity-50 cursor-not-allowed":"bg-slate-800/50 hover:bg-slate-800 border border-transparent"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-sky-500 to-violet-500 flex items-center justify-center text-white font-bold text-sm",children:[b.first_name?.[0],b.last_name?.[0]]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"font-medium",children:[b.first_name," ",b.last_name]}),e.jsx("p",{className:"text-sm text-slate-400",children:b.title||"N/A"})]}),E&&e.jsx("span",{className:"text-xs text-slate-500",children:"Deja ajoute"})]})},b.id)})})]}),i&&v&&e.jsx("div",{className:"p-4 rounded-lg bg-emerald-500/10 border border-emerald-500/30",children:e.jsxs("div",{className:"flex items-center gap-2 text-emerald-400",children:[e.jsx(ge,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:`Sera ajoute a l'etape "Source"`})]})})]}),e.jsxs("div",{className:"hunt-modal-footer",children:[e.jsx("button",{type:"button",onClick:u,className:"hunt-btn-secondary",children:"Annuler"}),e.jsx("button",{onClick:k,disabled:!o,className:"hunt-btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:"Ajouter au pipeline"})]})]})})}function _s({data:a}){const{invoices:m,companies:p,missions:r,candidates:n,applications:u,addInvoice:i,updateInvoice:g}=a,[v,x]=C.useState(""),[c,l]=C.useState("all"),[d,o]=C.useState(!1),k=m.filter(s=>{const t=s.invoice_number?.toLowerCase().includes(v.toLowerCase())||s.companies?.name?.toLowerCase().includes(v.toLowerCase()),f=c==="all"||s.status===c;return t&&f}),b=m.filter(s=>s.status==="sent"||s.status==="overdue").reduce((s,t)=>s+Number(t.amount_ttc),0),E=m.filter(s=>s.status==="paid").reduce((s,t)=>s+Number(t.amount_ttc),0),D=s=>ue.find(t=>t.id===s)||{label:s,color:"#6B7280"},P=async s=>{try{await i(s),o(!1)}catch(t){console.error("Error creating invoice:",t)}},L=async s=>{await g(s.id,{status:"paid",paid_date:new Date().toISOString().split("T")[0]})},w=async s=>{await g(s.id,{status:"sent"})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Facturation"}),e.jsxs("p",{className:"text-slate-400",children:[m.length," factures au total"]})]}),e.jsxs(y.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>o(!0),className:"hunt-btn-primary flex items-center gap-2",children:[e.jsx(O,{className:"w-5 h-5"}),"Nouvelle facture"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"hunt-stat-card",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-emerald-500 to-green-600",children:e.jsx(ae,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-2xl font-bold",children:[E.toLocaleString()," €"]}),e.jsx("p",{className:"text-sm text-slate-400",children:"Encaisse"})]})]})}),e.jsx("div",{className:"hunt-stat-card",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-amber-500 to-orange-600",children:e.jsx(_e,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-2xl font-bold",children:[b.toLocaleString()," €"]}),e.jsx("p",{className:"text-sm text-slate-400",children:"En attente"})]})]})}),e.jsx("div",{className:"hunt-stat-card",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-sky-500 to-blue-600",children:e.jsx(he,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:m.filter(s=>s.status==="sent").length}),e.jsx("p",{className:"text-sm text-slate-400",children:"Envoyees"})]})]})}),e.jsx("div",{className:"hunt-stat-card",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-red-500 to-rose-600",children:e.jsx(ie,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:m.filter(s=>s.status==="overdue").length}),e.jsx("p",{className:"text-sm text-slate-400",children:"En retard"})]})]})})]}),e.jsx("div",{className:"hunt-card p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(G,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-500"}),e.jsx("input",{type:"text",placeholder:"Rechercher par numero, entreprise...",value:v,onChange:s=>x(s.target.value),className:"hunt-input pl-10"})]}),e.jsxs("select",{value:c,onChange:s=>l(s.target.value),className:"hunt-select w-full sm:w-48",children:[e.jsx("option",{value:"all",children:"Tous les statuts"}),ue.map(s=>e.jsx("option",{value:s.id,children:s.label},s.id))]})]})}),e.jsxs("div",{className:"hunt-card overflow-hidden",children:[e.jsxs("table",{className:"hunt-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"N° Facture"}),e.jsx("th",{children:"Client"}),e.jsx("th",{children:"Mission / Candidat"}),e.jsx("th",{children:"Montant TTC"}),e.jsx("th",{children:"Echeance"}),e.jsx("th",{children:"Statut"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:k.map(s=>{const t=D(s.status),f=s.status==="sent"&&new Date(s.due_date)<new Date;return e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("span",{className:"font-mono font-semibold",children:s.invoice_number})}),e.jsx("td",{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{className:"w-4 h-4 text-slate-500"}),e.jsx("span",{children:s.companies?.name||"N/A"})]})}),e.jsx("td",{children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.missions?.title||"N/A"}),s.candidates&&e.jsxs("p",{className:"text-sm text-slate-400",children:[s.candidates.first_name," ",s.candidates.last_name]})]})}),e.jsx("td",{children:e.jsxs("span",{className:"font-semibold",children:[Number(s.amount_ttc).toLocaleString()," €"]})}),e.jsx("td",{children:e.jsxs("div",{className:`flex items-center gap-2 ${f?"text-red-400":""}`,children:[e.jsx(Ce,{className:"w-4 h-4"}),e.jsx("span",{children:s.due_date?new Date(s.due_date).toLocaleDateString("fr-BE"):"N/A"})]})}),e.jsx("td",{children:e.jsx("span",{className:"hunt-badge",style:{backgroundColor:`${t.color}20`,color:t.color},children:t.label})}),e.jsx("td",{children:e.jsxs("div",{className:"flex items-center gap-1",children:[s.status==="draft"&&e.jsx("button",{onClick:()=>w(s),className:"p-2 hover:bg-slate-700 rounded-lg text-sky-400",title:"Marquer comme envoyee",children:e.jsx(he,{className:"w-4 h-4"})}),(s.status==="sent"||s.status==="overdue")&&e.jsx("button",{onClick:()=>L(s),className:"p-2 hover:bg-slate-700 rounded-lg text-emerald-400",title:"Marquer comme payee",children:e.jsx(ae,{className:"w-4 h-4"})}),e.jsx("button",{className:"p-2 hover:bg-slate-700 rounded-lg",title:"Telecharger PDF",children:e.jsx(be,{className:"w-4 h-4"})})]})})]},s.id)})})]}),k.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(fe,{className:"w-16 h-16 text-slate-700 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-slate-400",children:"Aucune facture trouvee"})]})]}),e.jsx(q,{children:d&&e.jsx(ks,{companies:p,missions:r,candidates:n,applications:u,onSave:P,onClose:()=>o(!1)})})]})}function ks({companies:a,missions:m,candidates:p,applications:r,onSave:n,onClose:u}){const[i,g]=C.useState({company_id:"",mission_id:"",candidate_id:"",amount_ht:"",vat_rate:21,due_date:"",notes:""}),v=r.filter(d=>d.status==="hired");m.find(d=>d.id===i.mission_id);const x=i.amount_ht?(Number(i.amount_ht)*(1+i.vat_rate/100)).toFixed(2):0,c=d=>{const o=m.find(b=>b.id===d),k=v.find(b=>b.mission_id===d);g({...i,mission_id:d,company_id:o?.company_id||"",candidate_id:k?.candidate_id||""})},l=d=>{d.preventDefault();const o=new Date;o.setDate(o.getDate()+30),n({...i,amount_ht:Number(i.amount_ht),amount_ttc:Number(x),due_date:i.due_date||o.toISOString().split("T")[0],status:"draft"})};return e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"hunt-modal-overlay",onClick:u,children:e.jsxs(y.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"hunt-modal max-w-lg",onClick:d=>d.stopPropagation(),children:[e.jsxs("div",{className:"hunt-modal-header",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Nouvelle facture"}),e.jsx("button",{onClick:u,className:"p-2 hover:bg-slate-700 rounded-lg",children:e.jsx($,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:l,children:[e.jsxs("div",{className:"hunt-modal-body space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Mission (placement) *"}),e.jsxs("select",{value:i.mission_id,onChange:d=>c(d.target.value),className:"hunt-select",required:!0,children:[e.jsx("option",{value:"",children:"Selectionner une mission..."}),m.filter(d=>d.status==="filled").map(d=>e.jsxs("option",{value:d.id,children:[d.title," - ",d.companies?.name]},d.id))]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Montant HT (€) *"}),e.jsx("input",{type:"number",value:i.amount_ht,onChange:d=>g({...i,amount_ht:d.target.value}),className:"hunt-input",placeholder:"Ex: 5000",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"TVA %"}),e.jsxs("select",{value:i.vat_rate,onChange:d=>g({...i,vat_rate:Number(d.target.value)}),className:"hunt-select",children:[e.jsx("option",{value:21,children:"21%"}),e.jsx("option",{value:6,children:"6%"}),e.jsx("option",{value:0,children:"0%"})]})]})]}),i.amount_ht&&e.jsx("div",{className:"p-4 rounded-lg bg-emerald-500/10 border border-emerald-500/30",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Montant TTC"}),e.jsxs("span",{className:"text-2xl font-bold text-emerald-400",children:[Number(x).toLocaleString()," €"]})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Date d'echeance"}),e.jsx("input",{type:"date",value:i.due_date,onChange:d=>g({...i,due_date:d.target.value}),className:"hunt-input"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Par defaut: 30 jours"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Notes"}),e.jsx("textarea",{value:i.notes,onChange:d=>g({...i,notes:d.target.value}),className:"hunt-input min-h-[80px] resize-y",placeholder:"Notes internes..."})]})]}),e.jsxs("div",{className:"hunt-modal-footer",children:[e.jsx("button",{type:"button",onClick:u,className:"hunt-btn-secondary",children:"Annuler"}),e.jsx("button",{type:"submit",className:"hunt-btn-primary",children:"Creer la facture"})]})]})]})})}function Ss({data:a}){const{candidates:m,companies:p,missions:r,applications:n,invoices:u,stats:i}=a,g=C.useMemo(()=>{const x=new Date,c=x.getMonth(),l=x.getFullYear(),d=n.filter(t=>{const f=new Date(t.created_at);return f.getMonth()===c&&f.getFullYear()===l}),o=n.filter(t=>{const f=new Date(t.updated_at);return t.status==="hired"&&f.getMonth()===c&&f.getFullYear()===l}),k=u.filter(t=>{const f=new Date(t.created_at);return f.getMonth()===c&&f.getFullYear()===l}),b=n.length>0?(n.filter(t=>t.status==="hired").length/n.length*100).toFixed(1):0,E=n.filter(t=>t.status==="hired").reduce((t,f)=>{const I=new Date(f.created_at),F=new Date(f.updated_at);return t+(F-I)/(1e3*60*60*24)},0)/(n.filter(t=>t.status==="hired").length||1),D={};r.forEach(t=>{(t.required_skills||[]).forEach(f=>{D[f]=(D[f]||0)+1})});const P=Object.entries(D).sort((t,f)=>f[1]-t[1]).slice(0,10),L={};p.forEach(t=>{t.industry&&(L[t.industry]=(L[t.industry]||0)+1)});const w={};m.forEach(t=>{t.location&&(w[t.location]=(w[t.location]||0)+1)});const s=Object.entries(w).sort((t,f)=>f[1]-t[1]).slice(0,5);return{thisMonthApps:d.length,thisMonthPlacements:o.length,thisMonthRevenue:k.filter(t=>t.status==="paid").reduce((t,f)=>t+Number(f.amount_ttc),0),conversionRate:b,avgTimeToHire:E.toFixed(0),topSkills:P,industryDistribution:L,topLocations:s}},[m,p,r,n,u]),v=[{label:"Taux de conversion",value:`${g.conversionRate}%`,icon:ye,color:"from-emerald-500 to-green-600",description:"Candidatures -> Placements"},{label:"Temps moyen de placement",value:`${g.avgTimeToHire}j`,icon:_e,color:"from-sky-500 to-blue-600",description:"Du sourcing au hiring"},{label:"Placements ce mois",value:g.thisMonthPlacements,icon:ne,color:"from-violet-500 to-purple-600",description:"Missions pourvues"},{label:"CA ce mois",value:`${(g.thisMonthRevenue/1e3).toFixed(1)}k€`,icon:K,color:"from-amber-500 to-orange-600",description:"Factures encaissees"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Analytics"}),e.jsx("p",{className:"text-slate-400",children:"Performance et indicateurs cles"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:v.map((x,c)=>e.jsx(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:c*.1},className:"hunt-stat-card",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:`p-3 rounded-xl bg-gradient-to-br ${x.color}`,children:e.jsx(x.icon,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-3xl font-bold",children:x.value}),e.jsx("p",{className:"text-sm font-medium text-slate-300 mt-1",children:x.label}),e.jsx("p",{className:"text-xs text-slate-500",children:x.description})]})]})},x.label))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(y.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"hunt-card p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx(we,{className:"w-5 h-5 text-sky-400"}),"Repartition du Pipeline"]}),e.jsx("div",{className:"space-y-3",children:xe.map(x=>{const c=i.pipeline?.[x.id]||0,l=Math.max(...Object.values(i.pipeline||{a:1})),d=l>0?c/l*100:0;return e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:x.color}}),e.jsx("span",{className:"text-sm w-24 flex-shrink-0",children:x.label}),e.jsx("div",{className:"flex-1 h-6 bg-slate-800 rounded-full overflow-hidden",children:e.jsx(y.div,{initial:{width:0},animate:{width:`${d}%`},transition:{duration:.5,delay:.2},className:"h-full rounded-full",style:{backgroundColor:x.color}})}),e.jsx("span",{className:"text-sm font-semibold w-8 text-right",children:c})]},x.id)})})]}),e.jsxs(y.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"hunt-card p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx(le,{className:"w-5 h-5 text-violet-400"}),"Competences les plus demandees"]}),e.jsx("div",{className:"space-y-3",children:g.topSkills.length===0?e.jsx("p",{className:"text-slate-500 text-sm",children:"Aucune donnee disponible"}):g.topSkills.map(([x,c],l)=>{const d=g.topSkills[0][1],o=c/d*100;return e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-xs font-bold text-slate-500 w-4",children:l+1}),e.jsx("span",{className:"text-sm w-32 truncate",children:x}),e.jsx("div",{className:"flex-1 h-5 bg-slate-800 rounded-full overflow-hidden",children:e.jsx(y.div,{initial:{width:0},animate:{width:`${o}%`},transition:{duration:.5,delay:l*.1},className:"h-full rounded-full bg-gradient-to-r from-violet-500 to-purple-600"})}),e.jsx("span",{className:"text-sm font-semibold w-8 text-right",children:c})]},x)})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"hunt-card p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx(W,{className:"w-5 h-5 text-emerald-400"}),"Candidats par statut"]}),e.jsx("div",{className:"space-y-4",children:H.map(x=>{const c=m.filter(d=>d.status===x.id).length,l=m.length>0?c/m.length*100:0;return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-sm",style:{color:x.color},children:x.label}),e.jsx("span",{className:"text-sm font-semibold",children:c})]}),e.jsx("div",{className:"h-2 bg-slate-800 rounded-full overflow-hidden",children:e.jsx(y.div,{initial:{width:0},animate:{width:`${l}%`},className:"h-full rounded-full",style:{backgroundColor:x.color}})})]},x.id)})})]}),e.jsxs(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"hunt-card p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx(z,{className:"w-5 h-5 text-amber-400"}),"Missions par statut"]}),e.jsx("div",{className:"space-y-4",children:J.map(x=>{const c=r.filter(d=>d.status===x.id).length,l=r.length>0?c/r.length*100:0;return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-sm",style:{color:x.color},children:x.label}),e.jsx("span",{className:"text-sm font-semibold",children:c})]}),e.jsx("div",{className:"h-2 bg-slate-800 rounded-full overflow-hidden",children:e.jsx(y.div,{initial:{width:0},animate:{width:`${l}%`},className:"h-full rounded-full",style:{backgroundColor:x.color}})})]},x.id)})})]}),e.jsxs(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"hunt-card p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx(Ze,{className:"w-5 h-5 text-sky-400"}),"Top localisations candidats"]}),e.jsx("div",{className:"space-y-4",children:g.topLocations.length===0?e.jsx("p",{className:"text-slate-500 text-sm",children:"Aucune donnee disponible"}):g.topLocations.map(([x,c],l)=>{const d=g.topLocations[0][1],o=c/d*100,k=["#0EA5E9","#8B5CF6","#F59E0B","#22C55E","#EC4899"];return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-sm truncate",style:{color:k[l]},children:x}),e.jsx("span",{className:"text-sm font-semibold",children:c})]}),e.jsx("div",{className:"h-2 bg-slate-800 rounded-full overflow-hidden",children:e.jsx(y.div,{initial:{width:0},animate:{width:`${o}%`},className:"h-full rounded-full",style:{backgroundColor:k[l]}})})]},x)})})]})]}),e.jsxs(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"hunt-card p-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-6",children:"Resume financier"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"text-center p-4 rounded-xl bg-slate-800/30",children:[e.jsx("p",{className:"text-3xl font-bold text-emerald-400",children:i.invoices?.paid||0}),e.jsx("p",{className:"text-sm text-slate-400 mt-1",children:"Factures payees"})]}),e.jsxs("div",{className:"text-center p-4 rounded-xl bg-slate-800/30",children:[e.jsx("p",{className:"text-3xl font-bold text-amber-400",children:i.invoices?.pending||0}),e.jsx("p",{className:"text-sm text-slate-400 mt-1",children:"En attente"})]}),e.jsxs("div",{className:"text-center p-4 rounded-xl bg-slate-800/30",children:[e.jsxs("p",{className:"text-3xl font-bold hunt-gradient-text",children:[((i.invoices?.revenue||0)/1e3).toFixed(1),"k€"]}),e.jsx("p",{className:"text-sm text-slate-400 mt-1",children:"CA total"})]}),e.jsxs("div",{className:"text-center p-4 rounded-xl bg-slate-800/30",children:[e.jsxs("p",{className:"text-3xl font-bold text-sky-400",children:[((i.invoices?.outstanding||0)/1e3).toFixed(1),"k€"]}),e.jsx("p",{className:"text-sm text-slate-400 mt-1",children:"A recevoir"})]})]})]})]})}const Es=[{icon:Oe,title:"Transparence totale",description:"Communication claire sur les processus, les delais et les decisions. Pas de zones grises.",color:"from-sky-500 to-blue-600"},{icon:ns,title:"Non-discrimination",description:"Evaluation basee uniquement sur les competences et l'adequation au poste. Zero tolerance pour les biais.",color:"from-violet-500 to-purple-600"},{icon:oe,title:"Respect de la vie privee",description:"Protection des donnees personnelles conformement au RGPD. Consentement explicite requis.",color:"from-emerald-500 to-green-600"},{icon:Ve,title:"Feedback constructif",description:"Retour systematique aux candidats, meme en cas de refus. Chacun merite une reponse.",color:"from-amber-500 to-orange-600"},{icon:W,title:"Equite salariale",description:"Promotion de la transparence et de l'equite des remunerations. Lutte contre les ecarts injustifies.",color:"from-pink-500 to-rose-600"},{icon:me,title:"Durabilite",description:"Privilegier les placements durables a la quantite. La qualite prime sur le volume.",color:"from-red-500 to-rose-600"}],je=[{title:"Reponse garantie sous 5 jours",description:"Tout candidat recoit une reponse personnalisee dans les 5 jours ouvres suivant sa candidature."},{title:"Confidentialite absolue",description:"Aucune candidature n'est transmise a une entreprise sans l'accord explicite prealable du candidat."},{title:"Service 100% gratuit pour les candidats",description:"Nos honoraires sont exclusivement payes par les entreprises. Jamais par les candidats."},{title:"Suivi post-placement",description:"Accompagnement personnalise pendant toute la periode d'essai pour garantir une integration reussie."},{title:"Formation continue",description:"Notre equipe se forme regulierement aux pratiques inclusives et aux evolutions du marche."}];function Ms({data:a}){const{charter:m}=a;return e.jsxs("div",{className:"space-y-8 max-w-4xl mx-auto",children:[e.jsxs(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-2xl bg-gradient-to-br from-emerald-500 to-green-600 mb-6",children:e.jsx(oe,{className:"w-10 h-10 text-white"})}),e.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Charte Ethique"}),e.jsx("p",{className:"text-xl text-slate-400 max-w-2xl mx-auto",children:"Notre engagement pour un recrutement responsable, transparent et respectueux de toutes les parties prenantes."}),m&&e.jsxs("div",{className:"mt-4 inline-flex items-center gap-2 px-4 py-2 rounded-full bg-emerald-500/20 text-emerald-400 text-sm",children:[e.jsx(Y,{className:"w-4 h-4"}),"Version ",m.version," - En vigueur depuis le ",new Date(m.effective_date).toLocaleDateString("fr-BE")]})]}),e.jsxs(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"hunt-card p-8 hunt-gradient-border",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(He,{className:"w-6 h-6 text-amber-400"}),e.jsx("h2",{className:"text-2xl font-bold",children:"Notre Vision"})]}),e.jsx("p",{className:"text-lg text-slate-300 leading-relaxed",children:"Nous croyons que le recrutement peut et doit etre une force positive. Notre mission est de connecter les talents et les entreprises de maniere ethique, en placant l'humain au coeur de chaque interaction. Nous refusons les pratiques qui deshumanisent le processus de recrutement."})]}),e.jsxs("div",{children:[e.jsxs(y.h2,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"text-2xl font-bold mb-6 flex items-center gap-3",children:[e.jsx(ze,{className:"w-6 h-6 text-sky-400"}),"Nos Principes Fondamentaux"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Es.map((p,r)=>e.jsx(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4+r*.1},className:"hunt-card p-6 group hover:border-slate-600",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:`p-3 rounded-xl bg-gradient-to-br ${p.color} group-hover:scale-110 transition-transform`,children:e.jsx(p.icon,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg mb-2",children:p.title}),e.jsx("p",{className:"text-slate-400 text-sm leading-relaxed",children:p.description})]})]})},p.title))})]}),e.jsxs(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8},children:[e.jsxs("h2",{className:"text-2xl font-bold mb-6 flex items-center gap-3",children:[e.jsx(ne,{className:"w-6 h-6 text-amber-400"}),"Nos Engagements Concrets"]}),e.jsx("div",{className:"hunt-card overflow-hidden",children:je.map((p,r)=>e.jsx("div",{className:`p-6 ${r!==je.length-1?"border-b border-slate-700":""}`,children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-emerald-500/20 flex items-center justify-center",children:e.jsx(Y,{className:"w-5 h-5 text-emerald-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-1",children:p.title}),e.jsx("p",{className:"text-slate-400 text-sm",children:p.description})]})]})},p.title))})]}),e.jsx(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1},className:"hunt-card p-8 bg-gradient-to-br from-slate-800/50 to-slate-900/50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Notre Responsabilite"}),e.jsx("p",{className:"text-slate-300 max-w-2xl mx-auto mb-6",children:"En tant qu'intermediaires entre les candidats et les entreprises, nous avons une responsabilite particuliere. Nous nous engageons a l'assumer pleinement, en toute transparence."}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mt-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl font-bold hunt-gradient-text mb-2",children:"100%"}),e.jsx("p",{className:"text-sm text-slate-400",children:"Conformite RGPD"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl font-bold text-emerald-400 mb-2",children:"5j"}),e.jsx("p",{className:"text-sm text-slate-400",children:"Delai de reponse max"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl font-bold text-amber-400 mb-2",children:"0€"}),e.jsx("p",{className:"text-sm text-slate-400",children:"Cout pour le candidat"})]})]})]})}),e.jsxs(y.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1.2},className:"text-center pt-8 border-t border-slate-800",children:[e.jsxs("p",{className:"text-slate-500 text-sm",children:["Cette charte est un document vivant. Elle evolue avec nos pratiques et les retours de nos parties prenantes. Derniere mise a jour : ",new Date().toLocaleDateString("fr-BE")]}),e.jsxs("div",{className:"mt-4 flex items-center justify-center gap-2 text-emerald-400",children:[e.jsx(me,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Signe par toute l'equipe ETHIK.HUNT"})]})]})]})}const As=[{id:"dashboard",label:"Dashboard",icon:ts},{id:"pipeline",label:"Pipeline",icon:Xe},{id:"candidates",label:"Vivier Talents",icon:W},{id:"missions",label:"Missions",icon:z},{id:"companies",label:"Entreprises",icon:U},{id:"invoices",label:"Facturation",icon:fe},{id:"analytics",label:"Analytics",icon:we},{id:"charter",label:"Charte Ethique",icon:oe}];function Fs(){const[a,m]=C.useState("dashboard"),[p,r]=C.useState(!0),[n,u]=C.useState(""),i=ds();C.useEffect(()=>{const v=()=>{r(window.innerWidth>1024)};return v(),window.addEventListener("resize",v),()=>window.removeEventListener("resize",v)},[]);const g=()=>{switch(a){case"dashboard":return e.jsx(pe,{data:i,onNavigate:m});case"candidates":return e.jsx(ps,{data:i});case"companies":return e.jsx(bs,{data:i});case"missions":return e.jsx(fs,{data:i});case"pipeline":return e.jsx(ws,{data:i});case"invoices":return e.jsx(_s,{data:i});case"analytics":return e.jsx(Ss,{data:i});case"charter":return e.jsx(Ms,{data:i});default:return e.jsx(pe,{data:i,onNavigate:m})}};return e.jsxs("div",{className:"hunt-app",children:[e.jsxs("aside",{className:`hunt-sidebar ${p?"open":""}`,children:[e.jsx("div",{className:"p-6 border-b border-slate-700",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-sky-500 to-violet-500 flex items-center justify-center",children:e.jsx(ye,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold hunt-gradient-text",children:"ETHIK.HUNT"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Recrutement Responsable"})]})]})}),e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"hunt-ethical-badge mb-4",children:[e.jsx(me,{className:"w-4 h-4"}),e.jsx("span",{children:"100% Ethique"})]})}),e.jsx("nav",{className:"py-4",children:As.map(v=>e.jsxs("button",{onClick:()=>m(v.id),className:`hunt-sidebar-item w-full ${a===v.id?"active":""}`,children:[e.jsx(v.icon,{className:"w-5 h-5"}),e.jsx("span",{children:v.label}),v.id==="pipeline"&&i.stats.applications?.active>0&&e.jsx("span",{className:"ml-auto px-2 py-0.5 text-xs font-bold bg-sky-500/20 text-sky-400 rounded-full",children:i.stats.applications.active})]},v.id))}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4 border-t border-slate-700",children:e.jsxs("div",{className:"hunt-card p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-emerald-500 to-teal-500 flex items-center justify-center text-white font-bold",children:"FW"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:"Fed. Wallonie-Bruxelles"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Enterprise License"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-emerald-400",children:[e.jsx(Y,{className:"w-4 h-4"}),e.jsx("span",{children:"RGPD Compliant"})]})]})})]}),e.jsxs("main",{className:`hunt-main ${p?"":"ml-0"}`,children:[e.jsxs("header",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>r(!p),className:"lg:hidden p-2 hover:bg-slate-800 rounded-lg",children:p?e.jsx($,{className:"w-6 h-6"}):e.jsx(Ye,{className:"w-6 h-6"})}),e.jsxs("div",{className:"relative",children:[e.jsx(G,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-500"}),e.jsx("input",{type:"text",placeholder:"Rechercher candidats, missions, entreprises...",value:n,onChange:v=>u(v.target.value),className:"hunt-input pl-10 w-80"})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>i.refresh(),className:"p-2 hover:bg-slate-800 rounded-lg text-slate-400 hover:text-white transition-colors",title:"Actualiser",children:e.jsx(Ue,{className:`w-5 h-5 ${i.loading?"animate-spin":""}`})}),e.jsxs("button",{className:"relative p-2 hover:bg-slate-800 rounded-lg text-slate-400 hover:text-white transition-colors",children:[e.jsx(Je,{className:"w-5 h-5"}),i.stats.missions?.urgent>0&&e.jsx("span",{className:"absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full"})]}),e.jsxs("div",{className:"flex items-center gap-3 pl-4 border-l border-slate-700",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm font-medium",children:"Admin"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Super utilisateur"})]}),e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-sky-500 to-violet-500 flex items-center justify-center text-white font-bold",children:"A"})]})]})]}),e.jsx(q,{mode:"wait",children:e.jsx(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:g()},a)})]}),p&&e.jsx("div",{className:"lg:hidden fixed inset-0 bg-black/50 z-30",onClick:()=>r(!1)})]})}export{Fs as Hunt,Fs as default};
